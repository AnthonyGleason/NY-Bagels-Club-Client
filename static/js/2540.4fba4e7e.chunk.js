(self.webpackChunknew_york_bagels_club=self.webpackChunknew_york_bagels_club||[]).push([[2540],{5080:(e,a,t)=>{"use strict";t.d(a,{Z:()=>c});t(2791);const c=t.p+"static/media/cart.f2e171d02b42402a53f8030c1fd79bc1.svg"},2540:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var c=t(2791),i=t(7579),n=t(5080),s=t(3240),b=t(8310),o=t(184);function d(e){var a,d,r,l,p;let{storeItem:f,cart:w,setCart:u,userTier:m,isSignedIn:h,setUserTier:x}=e;const[j,g]=(0,c.useState)(0),[v,k]=(0,c.useState)(0),[y,N]=(0,c.useState)(0),[_,F]=(0,c.useState)(0),[S,E]=(0,c.useState)(),[C,I]=(0,c.useState)(!1),[q,P]=(0,c.useState)(!1),[T,B]=(0,c.useState)(!0),[O,z]=(0,c.useState)(!1),M=(0,s._)();(0,c.useEffect)((()=>{T?B(!1):async function(){await M.start({opacity:1}),await M.start({opacity:0}).then((()=>{P(O)})),await M.start({opacity:1})}()}),[O]);const D=(0,c.useRef)(!0);(0,c.useEffect)((()=>{D.current&&(D.current=!1,window.innerWidth<450?t(969)("./".concat(f._id,".webp")).then((e=>{E(e.default)})):t(5332)("./".concat(f._id,".webp")).then((e=>{E(e.default)})))}),[D]),(0,c.useEffect)((()=>{localStorage.getItem("loginToken")||x("Non-Member")}),[h,x]),(0,c.useEffect)((()=>{"spread"===f.cat||"pastry"===f.cat?g((0,i.r)(w,f.name,"")):"bagel"===f.cat&&(k((0,i.r)(w,f.name,"six")),N((0,i.r)(w,f.name,"dozen")),F((0,i.r)(w,f.name,"two")))}),[w]);const U=function(e,a){switch(a){case"Non-Member":default:return e.toFixed(2);case"Gold Member":return(e-.05*e).toFixed(2);case"Platinum Member":return(e-.1*e).toFixed(2);case"Diamond Member":return(e-.15*e).toFixed(2)}};let V,$,L;switch(f.cat){case"bagel":$=f;break;case"spread":V=f;break;case"pastry":L=f}const G=(null===(a=$)||void 0===a?void 0:a.twoPrice)||0,R=(null===(d=$)||void 0===d?void 0:d.sixPrice)||0,Z=(null===(r=$)||void 0===r?void 0:r.dozenPrice)||0,A=(null===(l=V)||void 0===l?void 0:l.price)||0,W=(null===(p=L)||void 0===p?void 0:p.price)||0;return(0,o.jsx)("li",{id:"item-".concat(f._id),className:"store-item ",children:(0,o.jsxs)(b.E.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:2.5},viewport:{once:!1},className:"item-content",children:[(0,o.jsxs)("article",{className:"item-info",children:[(0,o.jsx)("h2",{children:f.name}),V&&"spread"===V.cat?function(e,a){if("spread"===f.cat)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{children:[a," Pricing"]}),(0,o.jsxs)("span",{children:["One Pound - $",e.toFixed(2)]})]})}(parseFloat(U(A,m)),m):null,$&&"bagel"===$.cat?function(e,a,t,c){if("bagel"===f.cat)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{children:["Two Pack (2 Bagels) - $",e.toFixed(2)]}),(0,o.jsxs)("span",{children:["Six Pack (6 Bagels) - $",a.toFixed(2)]}),(0,o.jsxs)("span",{children:["Baker's Dozen (13 Bagels) - $",t.toFixed(2)]})]})}(parseFloat(U(G,m)),parseFloat(U(R,m)),parseFloat(U(Z,m))):null,L&&"pastry"===L.cat?function(e,a){if("pastry"===f.cat)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{children:[a," Pricing"]}),(0,o.jsxs)("span",{children:["Six Pack - $",e.toFixed(2)]})]})}(parseFloat(U(W,m)),m):null,(0,o.jsx)("img",{decoding:"async",className:"store-item-home-img",id:"#".concat(f._id.toString(),"-img"),src:S,alt:"Item ".concat(f._id),loading:"lazy"}),(0,o.jsx)("p",{children:f.desc})]}),(0,o.jsx)("article",{className:"store-item-buttons",children:(0,o.jsx)("div",{className:"store-item-button-container",id:"#".concat(f._id.toString(),"-buttons"),children:q?"bagel"===f.cat?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(b.E.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:2.5},viewport:{once:!1},className:"store-item-button-wrapper",children:[(0,o.jsx)("button",{className:"quantity-button",onClick:()=>{(0,i.qi)((0,i.r)(w,f.name,"two")-1,f._id,u,C,I,"two",!1)},children:(0,o.jsx)("div",{children:"-"})}),(0,o.jsxs)("span",{children:[_," Two Pack(s) in Basket"]}),(0,o.jsx)("button",{className:"quantity-button",onClick:()=>{(0,i.qi)((0,i.r)(w,f.name,"two")+1,f._id,u,C,I,"two",!1)},children:(0,o.jsx)("div",{children:"+"})})]}),(0,o.jsxs)(b.E.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:2.5},viewport:{once:!1},className:"store-item-button-wrapper",children:[(0,o.jsx)("button",{className:"quantity-button",onClick:()=>{(0,i.qi)((0,i.r)(w,f.name,"six")-1,f._id,u,C,I,"six",!1)},children:(0,o.jsx)("div",{children:"-"})}),(0,o.jsxs)("span",{children:[v," Six Pack(s) in Basket"]}),(0,o.jsx)("button",{className:"quantity-button",onClick:()=>{(0,i.qi)((0,i.r)(w,f.name,"six")+1,f._id,u,C,I,"six",!1)},children:(0,o.jsx)("div",{children:"+"})})]}),(0,o.jsxs)(b.E.div,{className:"store-item-button-wrapper",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:2.5},viewport:{once:!1},children:[(0,o.jsx)("button",{className:"quantity-button",onClick:()=>{const e="dozen";(0,i.qi)((0,i.r)(w,f.name,e)-1,f._id,u,C,I,e,!1)},children:(0,o.jsx)("div",{children:"-"})}),(0,o.jsxs)("span",{children:[y," Baker's Dozen(s) in Basket"]}),(0,o.jsx)("button",{className:"quantity-button",onClick:()=>{const e="dozen";(0,i.qi)((0,i.r)(w,f.name,e)+1,f._id,u,C,I,e,!1)},children:(0,o.jsx)("div",{children:"+"})})]})]}):"spread"===f.cat||"pastry"===f.cat?(0,o.jsxs)("div",{className:"store-item-button-wrapper",children:[(0,o.jsx)("button",{className:"quantity-button",onClick:()=>{(0,i.qi)((0,i.r)(w,f.name)-1,f._id,u,C,I,"",!1)},children:"-"}),(0,o.jsxs)("span",{children:[j," in Basket"]}),(0,o.jsx)("button",{className:"quantity-button",onClick:()=>{(0,i.qi)((0,i.r)(w,f.name)+1,f._id,u,C,I,"",!1)},children:"+"})]}):(0,o.jsx)(o.Fragment,{}):(0,o.jsxs)("button",{onClick:()=>{z(!0)},className:"add-to-basket",children:[(0,o.jsx)("img",{decoding:"async",src:n.Z,alt:"shopping cart basket of items to checkout",loading:"lazy"}),(0,o.jsx)("span",{children:"Add To Basket"})]})})})]})})}var r=t(4545),l=t(1276);function p(e){let{cart:a,setCart:t,isSignedIn:i}=e;const[n,s]=(0,c.useState)("Non-Member"),p=(0,c.useRef)(!0),[f,w]=(0,c.useState)([]),[u,m]=(0,c.useState)([]);return(0,c.useEffect)((()=>{p.current&&(p.current=!1,(0,r.sg)(s),(0,l.N)(w,m))}),[p]),(0,o.jsxs)("section",{id:"store",className:"store-items-container",children:[(0,o.jsx)(b.E.h2,{className:"store-items-heading",id:"store-item-heading",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:2.5},viewport:{once:!1},children:"Introducing Brendel's Bagels: New York's Finest Bagels"}),(0,o.jsxs)("ul",{children:[f.map((e=>(0,o.jsx)(d,{storeItem:e,cart:a,setCart:t,userTier:n,isSignedIn:i,setUserTier:s},e._id))),u.map((e=>(0,o.jsx)(d,{storeItem:e,cart:a,setCart:t,userTier:n,isSignedIn:i,setUserTier:s},e._id)))]})]})}},1276:(e,a,t)=>{"use strict";t.d(a,{N:()=>i});var c=t(6795);const i=async function(e,a){try{const t=await fetch("".concat((0,c.F1)(),"/api/shop/all"),{method:"GET"}),i=await t.json(),{bagelItems:n,pastryItems:s}=i;if(!n||!s)throw new Error("There was an error retrieving shop items.");e&&n&&e(n),a&&s&&a(s)}catch(t){console.log("There was an error ".concat(t," when retrieving shop items."))}}},969:(e,a,t)=>{var c={"./520369f417b97a66116056d.webp":[4813,4813],"./650c9f303843aa9fa7ae75cf.webp":[7155,7155],"./650c9f8d3843aa9fa7ae75d0.webp":[3902,3902],"./650c9f9d3843aa9fa7ae75d1.webp":[155,155],"./650c9fb23843aa9fa7ae75d2.webp":[3881,3881],"./650c9fc43843aa9fa7ae75d3.webp":[4072,4072],"./650c9fda3843aa9fa7ae75d5.webp":[169,169],"./6520369f417b97a66116056d.webp":[9651,9651],"./652036ba417b97a66116056e.webp":[4694,4694],"./652036c8417b97a66116056f.webp":[4113,4113],"./652036d4417b97a661160570.webp":[5057,5057],"./652036f7417b97a661160573.webp":[8341,8341],"./65203703417b97a661160574.webp":[7323,7323],"./65203715417b97a661160575.webp":[3135,3135],"./65203721417b97a661160576.webp":[5363,5363],"./65203765417b97a66116057a.webp":[9107,9107],"./652040c7417b97a66116057c.webp":[2967,2967],"./652041b92e8c0d6ab1c221db.webp":[5401,5401],"./6520435f2e8c0d6ab1c221dc.webp":[1280,1280],"./652045312e8c0d6ab1c221dd.webp":[4777,4777],"./652045402e8c0d6ab1c221de.webp":[5132,5132],"./6520454b2e8c0d6ab1c221df.webp":[6214,6214],"./652045752e8c0d6ab1c221e1.webp":[2992,2992],"./652045922e8c0d6ab1c221e3.webp":[7200,7200],"./653863b3b71c6e7cd8c07252.webp":[1396,1396],"./653863fb89a8a37460d54728.webp":[2209,2209],"./6538649a89a8a37460d54729.webp":[3509,3509],"./654d2bf332a6ffcf5f2be863.webp":[6899,6899],"./656f601f7bf8db6fc344656b.webp":[6030,6030],"./656f60497bf8db6fc344656d.webp":[3840,3840],"./657257ca3a74139fcd8bf578.webp":[795,795],"./657258653a74139fcd8bf579.webp":[9440,9440],"./6572588a3a74139fcd8bf57a.webp":[6596,6596],"./657271d3b2763a5586c73dc5.webp":[7165,7165],"./657271fbb2763a5586c73dc6.webp":[3122,3122],"./65727299b2763a5586c73dc7.webp":[1536,1536]};function i(e){if(!t.o(c,e))return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=c[e],i=a[0];return t.e(a[1]).then((()=>t.t(i,17)))}i.keys=()=>Object.keys(c),i.id=969,e.exports=i},5332:(e,a,t)=>{var c={"./520369f417b97a66116056d.webp":[1222,1222],"./650c9f303843aa9fa7ae75cf.webp":[7330,7330],"./650c9f8d3843aa9fa7ae75d0.webp":[1511,1511],"./650c9f9d3843aa9fa7ae75d1.webp":[4357,4357],"./650c9fb23843aa9fa7ae75d2.webp":[4364,4364],"./650c9fc43843aa9fa7ae75d3.webp":[7936,7936],"./650c9fda3843aa9fa7ae75d5.webp":[2259,2259],"./6520369f417b97a66116056d.webp":[12,12],"./652036ba417b97a66116056e.webp":[8692,8692],"./652036c8417b97a66116056f.webp":[6567,6567],"./652036d4417b97a661160570.webp":[1243,1243],"./652036f7417b97a661160573.webp":[3286,3286],"./65203703417b97a661160574.webp":[3201,3201],"./65203715417b97a661160575.webp":[7810,7810],"./65203721417b97a661160576.webp":[8502,8502],"./65203765417b97a66116057a.webp":[6450,6450],"./652040c7417b97a66116057c.webp":[7496,6275],"./652041b92e8c0d6ab1c221db.webp":[1062,1062],"./6520435f2e8c0d6ab1c221dc.webp":[1726,1726],"./652045312e8c0d6ab1c221dd.webp":[6353,6353],"./652045402e8c0d6ab1c221de.webp":[9609,9609],"./6520454b2e8c0d6ab1c221df.webp":[4821,4821],"./652045752e8c0d6ab1c221e1.webp":[8584,8584],"./652045922e8c0d6ab1c221e3.webp":[5622,5622],"./653863b3b71c6e7cd8c07252.webp":[7029,7029],"./653863fb89a8a37460d54728.webp":[9779,9779],"./6538649a89a8a37460d54729.webp":[3863,3863],"./654d2bf332a6ffcf5f2be863.webp":[3564,3564],"./656f601f7bf8db6fc344656b.webp":[1766,1766],"./656f60497bf8db6fc344656d.webp":[5679,5679],"./657257ca3a74139fcd8bf578.webp":[7269,7269],"./657258653a74139fcd8bf579.webp":[3184,3184],"./6572588a3a74139fcd8bf57a.webp":[8356,8356],"./657271d3b2763a5586c73dc5.webp":[207,207],"./657271fbb2763a5586c73dc6.webp":[3295,3295],"./65727299b2763a5586c73dc7.webp":[7082,7082],"./mobile/520369f417b97a66116056d.webp":[4813,4813],"./mobile/650c9f303843aa9fa7ae75cf.webp":[7155,7155],"./mobile/650c9f8d3843aa9fa7ae75d0.webp":[3902,3902],"./mobile/650c9f9d3843aa9fa7ae75d1.webp":[155,155],"./mobile/650c9fb23843aa9fa7ae75d2.webp":[3881,3881],"./mobile/650c9fc43843aa9fa7ae75d3.webp":[4072,4072],"./mobile/650c9fda3843aa9fa7ae75d5.webp":[169,169],"./mobile/6520369f417b97a66116056d.webp":[9651,9651],"./mobile/652036ba417b97a66116056e.webp":[4694,4694],"./mobile/652036c8417b97a66116056f.webp":[4113,4113],"./mobile/652036d4417b97a661160570.webp":[5057,5057],"./mobile/652036f7417b97a661160573.webp":[8341,8341],"./mobile/65203703417b97a661160574.webp":[7323,7323],"./mobile/65203715417b97a661160575.webp":[3135,3135],"./mobile/65203721417b97a661160576.webp":[5363,5363],"./mobile/65203765417b97a66116057a.webp":[9107,9107],"./mobile/652040c7417b97a66116057c.webp":[2967,2967],"./mobile/652041b92e8c0d6ab1c221db.webp":[5401,5401],"./mobile/6520435f2e8c0d6ab1c221dc.webp":[1280,1280],"./mobile/652045312e8c0d6ab1c221dd.webp":[4777,4777],"./mobile/652045402e8c0d6ab1c221de.webp":[5132,5132],"./mobile/6520454b2e8c0d6ab1c221df.webp":[6214,6214],"./mobile/652045752e8c0d6ab1c221e1.webp":[2992,2992],"./mobile/652045922e8c0d6ab1c221e3.webp":[7200,7200],"./mobile/653863b3b71c6e7cd8c07252.webp":[1396,1396],"./mobile/653863fb89a8a37460d54728.webp":[2209,2209],"./mobile/6538649a89a8a37460d54729.webp":[3509,3509],"./mobile/654d2bf332a6ffcf5f2be863.webp":[6899,6899],"./mobile/656f601f7bf8db6fc344656b.webp":[6030,6030],"./mobile/656f60497bf8db6fc344656d.webp":[3840,3840],"./mobile/657257ca3a74139fcd8bf578.webp":[795,795],"./mobile/657258653a74139fcd8bf579.webp":[9440,9440],"./mobile/6572588a3a74139fcd8bf57a.webp":[6596,6596],"./mobile/657271d3b2763a5586c73dc5.webp":[7165,7165],"./mobile/657271fbb2763a5586c73dc6.webp":[3122,3122],"./mobile/65727299b2763a5586c73dc7.webp":[1536,1536]};function i(e){if(!t.o(c,e))return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=c[e],i=a[0];return t.e(a[1]).then((()=>t.t(i,17)))}i.keys=()=>Object.keys(c),i.id=5332,e.exports=i},3240:(e,a,t)=>{"use strict";t.d(a,{_:()=>d});var c=t(5956),i=t(9706),n=t(6774);function s(){let e=!1;const a=new Set,t={subscribe:e=>(a.add(e),()=>{a.delete(e)}),start(t,i){(0,c.k)(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");const s=[];return a.forEach((e=>{s.push((0,n.d)(e,t,{transitionOverride:i}))})),Promise.all(s)},set:t=>((0,c.k)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),a.forEach((e=>{(0,i.gg)(e,t)}))),stop(){a.forEach((e=>{!function(e){e.values.forEach((e=>e.stop()))}(e)}))},mount:()=>(e=!0,()=>{e=!1,t.stop()})};return t}var b=t(9829),o=t(2199);const d=function(){const e=(0,b.h)(s);return(0,o.L)(e.mount,[]),e}}}]);
//# sourceMappingURL=2540.4fba4e7e.chunk.js.map